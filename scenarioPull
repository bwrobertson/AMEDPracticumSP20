import base64
import os
from pymongo import MongoClient 
from bson.objectid import ObjectId

#update for GUI
os.chdir("C:/Users/Ben Robertson/Documents/Practicum/DemoFiles/DemoFilesRepo")

client = MongoClient("mongodb+srv://BWR:benji@adventurermart-j760a.mongodb.net/test?retryWrites=true&w=majority") 
db = client.Test

data = db["Demo"]

for x in data.find():
	print(x['name'])

#replace for GUI functionalities
print("Input log file you want")
scenName = input()
encodedScenario = data.find_one({'name': scenName})
pullKey = ""
fileName = ""
fileContent = ""

#update for GUI pull
for key in encodedScenario:
	print("Would you like to pull " + key + "?(Y/N)")
	pullKey = input()
	if (pullKey == "Y"):
		fileContent = encodedScenario[key]
		print("Name this file")
		fileName = input()
		if(key == "PCAP"):
			fileName = fileName + ".pcap"
		elif(key == "log"):
			fileName = fileName + ".log"
		else:
			fileName = fileName + ".jpg"
		with open(fileName, "wb") as decoded_image:
			decoded_image.write(base64.decodebytes(fileContent))
